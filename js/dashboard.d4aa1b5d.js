(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"0023":function(e,t,n){"use strict";n("9d90")},"0152":function(e,t,n){"use strict";n("5008")},"04ec":function(e,t,n){},"0732":function(e,t,n){"use strict";n("ab2a")},"0cb2":function(e,t,n){var r=n("7b0b"),a=Math.floor,s="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,i=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,l,c,u){var d=n+e.length,m=l.length,p=i;return void 0!==c&&(c=r(c),p=o),s.call(u,p,(function(r,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":o=c[s.slice(1,-1)];break;default:var i=+s;if(0===i)return r;if(i>m){var u=a(i/10);return 0===u?r:u<=m?void 0===l[u-1]?s.charAt(1):l[u-1]+s.charAt(1):r}o=l[i-1]}return void 0===o?"":o}))}},"225c":function(e,t,n){},"305b":function(e,t,n){},"39e4":function(e,t,n){"use strict";n("225c")},4527:function(e,t,n){"use strict";n("8a3f")},5008:function(e,t,n){},5319:function(e,t,n){"use strict";var r=n("d784"),a=n("825a"),s=n("50c4"),o=n("a691"),i=n("1d80"),l=n("8aa5"),c=n("0cb2"),u=n("14c3"),d=Math.max,m=Math.min,p=function(e){return void 0===e?e:String(e)};r("replace",2,(function(e,t,n,r){var b=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,f=r.REPLACE_KEEPS_$0,h=b?"$":"$0";return[function(n,r){var a=i(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!b&&f||"string"===typeof r&&-1===r.indexOf(h)){var i=n(t,e,this,r);if(i.done)return i.value}var _=a(e),v=String(this),w="function"===typeof r;w||(r=String(r));var g=_.global;if(g){var k=_.unicode;_.lastIndex=0}var C=[];while(1){var A=u(_,v);if(null===A)break;if(C.push(A),!g)break;var y=String(A[0]);""===y&&(_.lastIndex=l(v,s(_.lastIndex),k))}for(var L="",P=0,x=0;x<C.length;x++){A=C[x];for(var T=String(A[0]),S=d(m(o(A.index),v.length),0),D=[],$=1;$<A.length;$++)D.push(p(A[$]));var E=A.groups;if(w){var B=[T].concat(D,S,v);void 0!==E&&B.push(E);var F=String(r.apply(void 0,B))}else F=c(T,v,S,D,E,r);S>=P&&(L+=v.slice(P,S)+F,P=S+T.length)}return L+v.slice(P)}]}))},"607f":function(e,t,n){"use strict";n("305b")},"648a":function(e,t,n){},"67c4":function(e,t,n){"use strict";n("9205")},7277:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("DashboardHeader"),n("DashboardHeroine"),n("DashboardProgress"),n("section",{staticClass:"dashboard-box-bg"},[n("section",{staticClass:"dashboard-box"},[n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{xs:22,sm:22}},[n("DashboardSupply")],1)],1),n("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{xs:22,sm:22}},[n("DashboardBorrow")],1)],1)],1)])],1)},a=[],s=n("1da1"),o=n("5530"),i=(n("96cf"),n("d3b7"),n("25f0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container public-container-main"},[n("div",{staticClass:"address-box"},[e.address?n("p",[e._v(" "+e._s(e._f("formatAddress")(e.address,3,3))+" ")]):n("p",{staticClass:"error"},[e._v("Wrong Network")])]),n("div",{staticClass:"balance-box"},[n("p",[e._v(" "+e._s(e.balance||"-")+" "),n("i",{staticClass:"brand"})])])])}),l=[],c=n("2f62"),u={name:"DashboardHeader",components:{},computed:Object(o["a"])({},Object(c["b"])(["address","balance"])),methods:{}},d=u,m=(n("67c4"),n("2877")),p=Object(m["a"])(d,i,l,!1,null,"12fadfcc",null),b=p.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"heroine"},[n("div",{staticClass:"data-board"},[n("label",{staticClass:"supply"},[e._v("Supply Balance")]),n("div",{staticClass:"headline"},[e._v(" $"+e._s(e._f("fromToken")(e.supplyBalance,e.USET_DECIMAL_PLACES,2))+" ")])]),n("div",{staticClass:"data-board green"},[n("div",{staticClass:"net-apy-wrapper"},[n("div",{staticClass:"net-apy"},[n("svg",{attrs:{viewBox:"0 0 140 140",width:"100%"}},[n("path",{attrs:{d:"M 70 70 L  70 0 A 70 70 0 0 1 70 0 Z",stroke:"transparent",fill:"#9669ED"}}),n("path",{attrs:{d:"M 70 70 L  70 0 A 70 70 0 1 1 69.99956017702848 1.381744718642608e-9 Z",stroke:"transparent",fill:"#00D395"}})])]),n("div",{staticClass:"net-apy-description"},[n("label",[e._v("Net APY")]),n("div",{staticClass:"headline"},[e._v(e._s(e._f("toPercent")(e.netAPY,100))+e._s("%"))])])])]),n("div",{staticClass:"blue data-board"},[n("label",{staticClass:"borrow"},[e._v("Borrow Balance")]),n("div",{staticClass:"headline"},[e._v(" $"+e._s(e._f("fromToken")(e.borrowBalance,e.USET_DECIMAL_PLACES,2))+" ")])])])},h=[],_=n("630a"),v={name:"DashboardHeroine",components:{},data:function(){return{USET_DECIMAL_PLACES:_["b"]}},computed:Object(o["a"])({},Object(c["b"])(["supplyBalance","netAPY","borrowBalance"])),methods:{}},w=v,g=(n("99de"),Object(m["a"])(w,f,h,!1,null,"27cf9284",null)),k=g.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("p",{staticClass:"progress-title"},[e._v("Borrow Limit")]),n("p",{staticClass:"progress-title white"},[e._v(" "+e._s(e._f("toPercent")(e.borrowedLimitPercent,100))+e._s("%")+" ")]),n("el-progress",{staticClass:"progress-main flex-item",attrs:{"show-text":!1,percentage:e.$toPercent(e.borrowedLimitPercent,100),color:e.customColors}}),n("p",{staticClass:"progress-title endl"},[e._v(" "+e._s("$ ")+e._s(e._f("fromToken")(e.totalLimit,e.USET_DECIMAL_PLACES))+" ")])],1)},A=[],y={name:"DashboardProgress",data:function(){return{USET_DECIMAL_PLACES:_["b"],percentage:20,customColors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}]}},computed:Object(o["a"])({},Object(c["b"])(["borrowed","totalLimit","borrowedLimitPercent"])),methods:{}},L=y,P=(n("0023"),Object(m["a"])(L,C,A,!1,null,"7ea67b55",null)),x=P.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"list"},[n("h4",[e._v("Supply Markets")]),e.supplyList.length>0?n("el-table",{ref:"singleTable",staticClass:"table-box",staticStyle:{width:"100%"},attrs:{data:e.supplyList,"header-cell-style":{color:"#AAB8C1"},"header-row-class-name":"tableheader"},on:{"row-click":e.handleSeleUserId}},[n("el-table-column",{attrs:{label:"Asset"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}],null,!1,2507105690)}),n("el-table-column",{attrs:{label:"APY / Earned"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("toPercent")(t.row.supplyAPY,100))+e._s("%")+" "),n("br"),e._v(" "+e._s("TBD")+" ")]}}],null,!1,1347021307)}),n("el-table-column",{attrs:{label:"Balance"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("$")+e._s(e._f("fromToken")(t.row.balance.underlyingValue,e.USET_DECIMAL_PLACES,2))+" "),n("br"),e._v(" "+e._s(e._f("fromToken")(t.row.balance.balanceOfUnderlying,t.row.underlyingDecimals,2))+e._s(" "+t.row.name)+" ")]}}],null,!1,3823478600)}),n("el-table-column",{attrs:{label:"Collateral"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{value:t.row.isCollateral,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(n){return e.enterMarket(n,t.row)}}})]}}],null,!1,1858121742)})],1):e._e(),e.supplyList.length>0?n("span",{staticClass:"panel-label row",on:{click:function(t){e.showAllList=!e.showAllList}}},[n("label",[e._v("All Markets")]),n("span",{staticClass:"dropdown-icon",class:{active:e.showAllList}})]):e._e(),e.allList.length>0&&e.showAllList?n("el-table",{ref:"singleTable",staticClass:"table-box",staticStyle:{width:"100%"},attrs:{data:e.allList,"header-cell-style":{color:"#AAB8C1"},"header-row-class-name":"tableheader"},on:{"row-click":e.handleSeleUserId}},[n("el-table-column",{attrs:{label:"Asset"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}],null,!1,2507105690)}),n("el-table-column",{attrs:{label:"APY"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("toPercent")(t.row.supplyAPY,100))+e._s("%")+" ")]}}],null,!1,1946293953)}),n("el-table-column",{attrs:{label:"Wallet"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("fromToken")(t.row.balance.tokenBalance,t.row.underlyingDecimals,2))+e._s(" "+t.row.name)+" ")]}}],null,!1,768766657)}),n("el-table-column",{attrs:{label:"Collateral"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{value:t.row.isCollateral,"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(n){return e.enterMarket(n,t.row)}}})]}}],null,!1,1858121742)})],1):e._e(),n("Dialog",{directives:[{name:"show",rawName:"v-show",value:e.dialogVisible,expression:"dialogVisible"}],attrs:{dialogVisible:e.dialogVisible,currentForm:e.currentForm},on:{closeDialogVisible:e.closeDialogVisible}})],1)},S=[],D=(n("4de4"),n("159b"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-dialog",{attrs:{title:e.currentForm.cToken,visible:e.currentDialogVisible,width:e.screenWidth>e.defaultWidth?e.defaultWidth+"px":"96%",center:""},on:{"update:visible":function(t){e.currentDialogVisible=t},close:e.closeDialog}},[r("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[r("span",{staticClass:"title-text"},[e._v(e._s(e.currentForm.name))])]),r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"供应"}},[r("p",[e._v("供应")]),r("div",{staticClass:"formmain"},[e.currentForm.balance.tokenAllowance>0?r("div",{staticClass:"input calculation"},[r("el-input",{attrs:{placeholder:"请输入内容",controls:!1,maxlength:"20"},on:{input:e.onChangeInp},model:{value:e.supplyAmount,callback:function(t){e.supplyAmount=t},expression:"supplyAmount"}}),r("el-button",{staticClass:"max-btn",attrs:{type:"info",size:"mini"},on:{click:e.supplyMaxfn}},[e._v(" 最大值 ")])],1):r("div",[r("img",{staticClass:"asset-logo",attrs:{src:n("cf05"),alt:""}}),r("p",{staticClass:"small text-center"},[e._v(" 要向复合协议提供或偿还Basic Attention Token，您需要先启用它。 ")])]),r("div",{staticClass:"info"},[r("div",{staticClass:"form"},[r("label",{staticClass:"dark label-link"},[e._v("供应率")]),r("div",{staticClass:"calculation bottom-line"},[r("span",[r("i",{staticClass:"el-icon-lollipop"}),r("span",{staticClass:"description"},[e._v("存款年利率")])]),r("span",[e._v(" "+e._s(e._f("toPercent")(e.currentForm.supplyAPY,100))+e._s("%")+" ")])]),r("div",{staticClass:"calculation"},[r("span",[r("i",{staticClass:"el-icon-lollipop"}),r("span",{staticClass:"description"},[e._v("分销APY")])]),r("span",[e._v(" "+e._s("-- ")+" ")])])]),r("div",{staticClass:"form"},[r("label",{staticClass:"dark"},[e._v("借入限额")]),r("div",{staticClass:"calculation bottom-line"},[r("span",{staticClass:"description"},[e._v("借入限额")]),r("div",{staticClass:"row"},[r("span",[e._v(" $"+e._s(e._f("fromToken")(e.totalLimit,e.USET_DECIMAL_PLACES))+" ")]),e.supplyAmount>0?r("span",[e._v(" "+e._s(" -> ")+"$"+e._s(e._f("fromToken")(e.hopeTotalLimit,e.USET_DECIMAL_PLACES))+" ")]):e._e()])]),r("div",{staticClass:"calculation"},[r("span",{staticClass:"description"},[e._v("借入限额已使用")]),r("div",{staticClass:"row"},[r("span",[e._v(e._s(e._f("toPercent")(e.borrowedLimitPercent,100))+e._s("%"))]),e.supplyAmount>0?r("span",[e._v(" "+e._s(" -> ")+e._s(e._f("toPercent")(e.supplyAmountPercent,1))+e._s("%")+" ")]):e._e()])]),r("el-progress",{attrs:{percentage:e.supplyAmountPercent,"show-text":!1}})],1),r("div",{staticClass:"action-button"},[e.currentForm.balance.tokenAllowance>0?r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{width:"100%"},attrs:{type:"danger",disabled:1*e.supplyAmount>1*e.$fromToken(e.currentForm.balance.tokenBalance,e.currentForm.underlyingDecimals,2)},on:{click:e.supply}},[e._v(" 存入 ")]):r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.enable}},[e._v(" 启用 ")])],1),r("div",{staticClass:"bottom-note"},[r("div",{staticClass:"calculation"},[r("span",{staticClass:"description"},[e._v("钱包余额")]),r("span",[e._v(" "+e._s(e._f("fromToken")(e.currentForm.balance.tokenBalance,e.currentForm.underlyingDecimals,2))+" "+e._s(e.currentForm.name)+" ")])])])])])]),r("el-tab-pane",{attrs:{label:"提款"}},[r("p",[e._v("提款")]),r("div",{staticClass:"formmain"},[r("div",{staticClass:"input calculation"},[r("el-input",{attrs:{placeholder:"请输入内容",controls:!1,maxlength:"20"},on:{input:e.onChangeInpR},model:{value:e.redeemAmount,callback:function(t){e.redeemAmount=t},expression:"redeemAmount"}}),r("el-button",{staticClass:"max-btn",attrs:{type:"info",size:"mini"},on:{click:e.redeemMaxfn}},[e._v(" 最大值 ")])],1),r("div",{staticClass:"info"},[r("div",{staticClass:"form"},[r("label",{staticClass:"dark label-link"},[e._v("供应率")]),r("div",{staticClass:"calculation bottom-line"},[r("span",[r("i",{staticClass:"el-icon-lollipop"}),r("span",{staticClass:"description"},[e._v("存款年利率")])]),r("span",[e._v(" "+e._s(e._f("toPercent")(e.currentForm.supplyAPY,100))+e._s("%")+" ")])]),r("div",{staticClass:"calculation"},[r("span",[r("i",{staticClass:"el-icon-lollipop"}),r("span",{staticClass:"description"},[e._v("分销APY")])]),r("span",[e._v(" "+e._s("-- ")+" ")])])]),r("div",{staticClass:"form"},[r("label",{staticClass:"dark"},[e._v("借入限额")]),r("div",{staticClass:"calculation bottom-line"},[r("span",{staticClass:"description"},[e._v("借入限额")]),r("div",{staticClass:"row"},[r("span",[e._v(" $"+e._s(e._f("fromToken")(e.totalLimit,e.USET_DECIMAL_PLACES))+" ")]),e.redeemAmount>0?r("span",[e._v(" "+e._s(" -> ")+"$"+e._s(e._f("fromToken")(e.hopeTotalLimit,e.USET_DECIMAL_PLACES))+" ")]):e._e()])]),r("div",{staticClass:"calculation"},[r("span",{staticClass:"description"},[e._v("借入限额已使用")]),r("div",{staticClass:"row"},[r("span",[e._v(" "+e._s(e._f("toPercent")(e.borrowedLimitPercent,100))+e._s("%")+" ")]),e.redeemAmount>0?r("span",[e._v(" "+e._s(" -> ")+e._s(e._f("toPercent")(e.redeemAmountPercent,1))+e._s("%")+" ")]):e._e()])])]),r("el-progress",{attrs:{percentage:e.redeemAmountPercent,"show-text":!1}}),r("div",{staticClass:"action-button"},[e.$fromToken(e.currentForm.balance.balanceOfUnderlying,e.currentForm.underlyingDecimals,2)>0&&1*e.redeemAmount<=1*e.$fromToken(e.currentForm.balance.balanceOfUnderlying,e.currentForm.underlyingDecimals,2)?r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.redeem}},[e._v(" 提款 ")]):r("el-button",{staticStyle:{width:"100%"},attrs:{type:"info",disabled:""}},[e._v(" 没有余额可以提款 ")])],1),r("div",{staticClass:"bottom-note"},[r("div",{staticClass:"calculation"},[r("span",{staticClass:"description"},[e._v("目前供应 ")]),r("span",[e._v(" "+e._s(e._f("fromToken")(e.currentForm.balance.balanceOfUnderlying,e.currentForm.underlyingDecimals,2))+" "+e._s(e.currentForm.name)+" ")])])])],1)])])],1)],1)],1)}),$=[],E=(n("ac1f"),n("5319"),{name:"DashboardSupplyDialog",props:{dialogVisible:Boolean,currentForm:Object},data:function(){return{USET_DECIMAL_PLACES:_["b"],screenWidth:document.body.clientWidth,defaultWidth:400,currentDialogVisible:!1,redeemAmount:0,supplyAmount:0,status:{enabled:!1,ctokenBalance:0,borrowBalance:0,marketRate:0},cToken:null,hopeBorrowed:111,hopeTotalLimit:1111,hopeLimitPercent:11111}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["address","contracts","fullscreenLoading","totalLimit","borrowedLimitPercent"])),{},{supplyAmountPercent:function(){var e=0;return e=this.supplyAmount>0?1*this.$toPercent(this.hopeLimitPercent,100):this.$toPercent(this.borrowedLimitPercent,100),e<0&&(e=0),e>100&&(e=100),e},redeemAmountPercent:function(){var e=0;return e=this.redeemAmount>0?1*this.$toPercent(this.hopeLimitPercent,100):this.$toPercent(this.borrowedLimitPercent,100),e<0&&(e=0),e>100&&(e=100),e}}),created:function(){},mounted:function(){console.log("this.currentForm --- ",this.currentForm)},methods:Object(o["a"])(Object(o["a"])({},Object(c["c"])(["setShowFullscreenLoading"])),{},{enable:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.cToken.enableMarket();case 2:return n=t.sent,t.next=5,n.wait(1);case 5:t.sent,e.flushStatus();case 8:case"end":return t.stop()}}),t)})))()},supply:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.supplyAmount&&0!=e.supplyAmount){t.next=3;break}return e.$notify.error({title:"error",message:"请输入数量"}),t.abrupt("return",!1);case 3:if(n=e.$fromToken(e.currentForm.balance.tokenBalance,e.currentForm.underlyingDecimals,2),!(1*e.supplyAmount>1*n)){t.next=7;break}return e.$notify.error({title:"error",message:"余额不足"}),t.abrupt("return",!1);case 7:return e.setShowFullscreenLoading(!0),r=e.$toToken(e.supplyAmount,e.currentForm.cTokenDecimals),t.next=11,e.cToken.mint(r);case 11:return a=t.sent,t.next=14,a.wait(1);case 14:t.sent,e.resetStatus();case 17:case"end":return t.stop()}}),t)})))()},redeem:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.redeemAmount&&0!=e.redeemAmount){t.next=3;break}return e.$notify.error({title:"error",message:"请输入数量"}),t.abrupt("return",!1);case 3:if(n=e.$fromToken(e.currentForm.balance.balanceOfUnderlying,e.currentForm.underlyingDecimals,2),!(e.redeemAmount>n)){t.next=7;break}return e.$notify.error({title:"error",message:"余额不足"}),t.abrupt("return",!1);case 7:return e.setShowFullscreenLoading(!0),r=e.$toToken(e.redeemAmount,e.currentForm.cTokenDecimals),t.next=11,e.cToken.redeem(r);case 11:return a=t.sent,t.next=14,a.wait(1);case 14:t.sent,e.resetStatus();case 17:case"end":return t.stop()}}),t)})))()},supplyMaxfn:function(){var e=this.$fromToken(this.currentForm.balance.tokenBalance,this.currentForm.underlyingDecimals,2);this.supplyAmount=e},redeemMaxfn:function(){var e=this.$fromToken(this.currentForm.balance.balanceOfUnderlying,this.currentForm.underlyingDecimals,2);this.redeemAmount=e},closeDialog:function(){this.supplyAmount=0,this.redeemAmount=0,this.$emit("closeDialogVisible")},resetStatus:function(){this.setShowFullscreenLoading(!1),this.closeDialog()},flushStatus:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.cToken.getAccountSnapshot();case 2:return n=t.sent,t.next=5,e.cToken.getMarketEnabled();case 5:t.t0=t.sent,t.t1=n[0],t.t2=n[1],t.t3=n[2],e.status={enabled:t.t0,ctokenBalance:t.t1,borrowBalance:t.t2,marketRate:t.t3};case 10:case"end":return t.stop()}}),t)})))()},onChangeInp:function(){var e=this.supplyAmount;e=e.replace(/[^\d.]/g,""),e=e.replace(/^0(\d+)/g,"$1"),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d{6}).*$/,"$1$2.$3"),this.supplyAmount=e,console.log("this.supplyAmount",this.supplyAmount);var t=this.$toToken(this.supplyAmount,this.currentForm.cTokenDecimals);this.getBorrowLimit(this.currentForm.cToken,t,"mint")},onChangeInpR:function(){var e=this.redeemAmount;e=e.replace(/[^\d.]/g,""),e=e.replace(/^0(\d+)/g,"$1"),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d{6}).*$/,"$1$2.$3"),this.redeemAmount=e,console.log("this.redeemAmount",this.redeemAmount);var t=this.$toToken(this.redeemAmount,this.currentForm.cTokenDecimals);this.getBorrowLimit(this.currentForm.cToken,t,"redeem")},getBorrowLimit:function(e,t,n){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s,o,i,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,window.clens.marketInfo(r.address);case 2:return s=a.sent,a.next=5,s.borrowLimit(e,t,n);case 5:o=a.sent,i=o[0],l=o[1],c=o[2],r.hopeBorrowed=i,r.hopeTotalLimit=l,r.hopeLimitPercent=c;case 12:case"end":return a.stop()}}),a)})))()}}),watch:{dialogVisible:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.currentDialogVisible=t,1==t&&(this.contracts.forEach((function(e){e.cToken.cToken.address===n.currentForm.cToken&&(n.cToken=e.cToken)})),this.flushStatus());case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}}),B=E,F=(n("0152"),Object(m["a"])(B,D,$,!1,null,"67588f50",null)),O=F.exports,j={name:"DashboardSupply",components:{Dialog:O},data:function(){return{USET_DECIMAL_PLACES:_["b"],currentForm:{name:"-",cToken:"",asset:null,apy:null,wallet:null,danwei:null,collateral:null,liquidity:0,supplyAPY:0,supplyRatePerBlock:0,borrowAPY:0,borrowRatePerBlock:0,underlyingDecimals:0,balance:{tokenBalance:0}},dialogVisible:!1,showAllList:!0}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["markets","contracts"])),{},{allList:function(){return this.markets.filter((function(e){return 0==e.balance.balanceOfUnderlying}))},supplyList:function(){return this.markets.filter((function(e){return e.balance.balanceOfUnderlying>0}))}}),created:function(){},mounted:function(){},methods:{handleSeleUserId:function(e,t){"Collateral"!=t.label&&(this.currentForm=e,this.dialogVisible=!0)},closeDialogVisible:function(){this.dialogVisible=!1},enterMarket:function(e,t){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.contracts.forEach((function(e){e.cToken.cToken.address===t.cToken&&(a=e.cToken)})),!e){r.next=9;break}return r.next=4,a.enterMarket();case 4:return s=r.sent,r.next=7,s.wait(1);case 7:r.next=14;break;case 9:return r.next=11,a.exitMarket();case 11:return o=r.sent,r.next=14,o.wait(1);case 14:case"end":return r.stop()}}),r)})))()}}},I=j,M=(n("4527"),n("39e4"),Object(m["a"])(I,T,S,!1,null,"30cd60c3",null)),R=M.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"list"},[n("h4",[e._v("Borrow Markets")]),e.borrowList.length>0?n("el-table",{ref:"singleTable",staticClass:"table-box",staticStyle:{width:"100%"},attrs:{data:e.borrowList,"header-cell-style":{color:"#AAB8C1"},"header-row-class-name":"tableheader"},on:{"row-click":e.handleSeleUserId}},[n("el-table-column",{attrs:{label:"Asset"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}],null,!1,2507105690)}),n("el-table-column",{attrs:{label:"APY / Accrued"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("toPercent")(t.row.borrowAPY,100))+e._s("%")+" "),n("br"),e._v(" "+e._s("TBD")+" ")]}}],null,!1,3390548349)}),n("el-table-column",{attrs:{label:"Balance"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("$")+e._s(e._f("fromToken")(t.row.balance.underlyingValue,e.USET_DECIMAL_PLACES,2))+" "),n("br"),e._v(" "+e._s(e._f("fromToken")(t.row.balance.borrowBalanceCurrent,t.row.underlyingDecimals,2))+e._s(" "+t.row.name)+" ")]}}],null,!1,597772448)}),n("el-table-column",{attrs:{label:"% Of Limit"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-progress",{attrs:{percentage:e.$toPercent(t.row.balance.limitPercent,100)}})]}}],null,!1,376773462)})],1):e._e(),e.borrowList.length>0?n("span",{staticClass:"panel-label row",on:{click:function(t){e.showAllList=!e.showAllList}}},[n("label",[e._v("All Markets")]),n("span",{staticClass:"dropdown-icon",class:{active:e.showAllList}})]):e._e(),e.allList.length>0&&e.showAllList?n("el-table",{ref:"singleTable",staticClass:"table-box",staticStyle:{width:"100%"},attrs:{data:e.allList,"header-cell-style":{color:"#AAB8C1"},"header-row-class-name":"tableheader"},on:{"row-click":e.handleSeleUserId}},[n("el-table-column",{attrs:{label:"Asset"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}],null,!1,2507105690)}),n("el-table-column",{attrs:{label:"APY"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("toPercent")(t.row.borrowAPY,100))+e._s("%")+" ")]}}],null,!1,2208582599)}),n("el-table-column",{attrs:{label:"Wallet"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e._f("fromToken")(t.row.balance.tokenBalance,t.row.underlyingDecimals,2))+e._s(" "+t.row.name)+" ")]}}],null,!1,768766657)}),n("el-table-column",{attrs:{label:"Liquidity"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" $"+e._s(e._f("fromToken")(t.row.totalCash,e.USET_DECIMAL_PLACES,2))+" ")]}}],null,!1,1517164112)})],1):e._e(),n("Dialog",{directives:[{name:"show",rawName:"v-show",value:e.dialogVisible,expression:"dialogVisible"}],attrs:{dialogVisible:e.dialogVisible,currentForm:e.currentForm},on:{closeDialogVisible:e.closeDialogVisible}})],1)},V=[],Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("el-dialog",{attrs:{title:e.currentForm.asset,visible:e.currentDialogVisible,width:e.screenWidth>e.defaultWidth?e.defaultWidth+"px":"96%",center:""},on:{"update:visible":function(t){e.currentDialogVisible=t},close:e.closeDialog}},[r("div",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[r("span",{staticClass:"title-text"},[e._v(e._s(e.currentForm.name))])]),r("el-tabs",{attrs:{type:"border-card"}},[r("el-tab-pane",{attrs:{label:"借贷"}},[r("p",[e._v("借贷")]),r("div",{staticClass:"formmain"},[r("div",{staticClass:"input calculation"},[r("el-input",{attrs:{placeholder:"请输入内容",controls:!1,maxlength:"20"},on:{input:e.onChangeInp},model:{value:e.borrowAmount,callback:function(t){e.borrowAmount=t},expression:"borrowAmount"}}),r("el-button",{staticClass:"max-btn",attrs:{type:"info",size:"mini"},on:{click:e.max80fn}},[e._v(" 80%限制 ")])],1),r("div",{staticClass:"info"},[r("div",{staticClass:"form"},[r("label",{staticClass:"dark label-link"},[e._v("借入利率")]),r("div",{staticClass:"calculation bottom-line"},[r("span",[r("i",{staticClass:"el-icon-lollipop"}),r("span",{staticClass:"description"},[e._v("借用APY")])]),r("span",[e._v(" "+e._s(e._f("toPercent")(e.currentForm.borrowAPY,100))+e._s("%")+" ")])]),r("div",{staticClass:"calculation"},[r("span",[r("i",{staticClass:"el-icon-lollipop"}),r("span",{staticClass:"description"},[e._v("分销APY")])]),r("span",[e._v(" "+e._s("-- ")+" ")])])]),r("div",{staticClass:"form"},[r("label",{staticClass:"dark label-link"},[e._v("借入限额")]),r("div",{staticClass:"calculation bottom-line"},[r("span",{staticClass:"description"},[e._v("借贷余额")]),r("div",{staticClass:"row"},[r("span",[e._v(" $"+e._s(e._f("fromToken")(e.borrowed,e.USET_DECIMAL_PLACES))+" ")]),e.borrowAmount>0?r("span",[e._v(" "+e._s(" -> ")+"$"+e._s(e._f("fromToken")(e.hopeBorrowed,e.USET_DECIMAL_PLACES))+" ")]):e._e()])]),r("div",{staticClass:"calculation"},[r("span",{staticClass:"description"},[e._v("借入限额已使用")]),r("div",{staticClass:"row"},[r("span",[e._v(" "+e._s(e._f("toPercent")(e.borrowedLimitPercent,100))+e._s("%")+" ")]),e.borrowAmount>0?r("span",[e._v(" "+e._s(" -> ")+e._s(e._f("toPercent")(e.borrowAmountPercent,1))+e._s("%")+" ")]):e._e()])])]),r("el-progress",{attrs:{percentage:e.borrowAmountPercent,"show-text":!1}}),r("div",{staticClass:"action-button"},[e.borrowedLimitPercent>=1||e.hopeLimitPercent>=1?r("el-button",{staticStyle:{width:"100%"},attrs:{type:"info",disabled:""}},[e._v(" 达到借款限额 ")]):r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.borrow}},[e._v(" 借款 ")])],1),r("div",{staticClass:"bottom-note"},[r("div",{staticClass:"calculation"},[r("span",{staticClass:"description"},[e._v("目前借款 ")]),r("span",[e._v(" "+e._s(e._f("fromToken")(e.currentForm.balance.borrowBalanceCurrent,e.currentForm.underlyingDecimals,2))+e._s(" "+e.currentForm.name)+" ")])])])],1)])]),r("el-tab-pane",{attrs:{label:"偿还"}},[r("p",[e._v("偿还")]),r("div",{staticClass:"formmain"},[e.currentForm.balance.tokenAllowance>0?r("div",{staticClass:"input calculation"},[r("el-input",{attrs:{placeholder:"请输入内容",controls:!1,maxlength:"20"},on:{input:e.onChangeInpR},model:{value:e.repayAmount,callback:function(t){e.repayAmount=t},expression:"repayAmount"}}),r("el-button",{staticClass:"max-btn",attrs:{type:"info",size:"mini"},on:{click:e.repayMaxfn}},[e._v(" 最大值 ")])],1):r("div",[r("img",{staticClass:"asset-logo",attrs:{src:n("cf05"),alt:""}}),r("p",{staticClass:"small text-center"},[e._v(" 要向复合协议提供或偿还Basic Attention Token，您需要先启用它。 ")])]),r("div",{staticClass:"info"},[r("div",{staticClass:"form"},[r("label",{staticClass:"dark label-link"},[e._v("借入利率")]),r("div",{staticClass:"calculation bottom-line"},[r("span",[r("i",{staticClass:"el-icon-lollipop"}),r("span",{staticClass:"description"},[e._v("借用APY")])]),r("span",[e._v(" "+e._s(e._f("toPercent")(e.currentForm.borrowAPY,100))+e._s("%")+" ")])]),r("div",{staticClass:"calculation"},[r("span",[r("i",{staticClass:"el-icon-lollipop"}),r("span",{staticClass:"description"},[e._v("分销APY")])]),r("span",[e._v(" "+e._s("-- ")+" ")])])]),r("div",{staticClass:"form"},[r("label",{staticClass:"dark label-link"},[e._v("借入限额")]),r("div",{staticClass:"calculation bottom-line"},[r("span",{staticClass:"description"},[e._v("借贷余额")]),r("div",{staticClass:"row"},[r("span",[e._v(" $"+e._s(e._f("fromToken")(e.borrowed,e.USET_DECIMAL_PLACES))+" ")]),e.repayAmount>0?r("span",[e._v(" "+e._s(" -> ")+"$"+e._s(e._f("fromToken")(e.hopeBorrowed,e.USET_DECIMAL_PLACES))+" ")]):e._e()])]),r("div",{staticClass:"calculation"},[r("span",{staticClass:"description"},[e._v("借入限额已使用")]),r("div",{staticClass:"row"},[r("span",[e._v(" "+e._s(e._f("toPercent")(e.borrowedLimitPercent,100))+e._s("%")+" ")]),e.repayAmount>0?r("span",[e._v(" "+e._s(" -> ")+e._s(e._f("toPercent")(e.repayAmountPercent,1))+e._s("%")+" ")]):e._e()])])]),r("el-progress",{attrs:{percentage:e.repayAmountPercent,"show-text":!1}}),r("div",{staticClass:"action-button"},[e.currentForm.balance.tokenAllowance>0?r("el-button",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.repayBorrow}},[e._v(" 偿还 ")]):r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.enable}},[e._v(" 启用 ")])],1),r("div",{staticClass:"bottom-note"},[r("div",{staticClass:"calculation"},[r("span",{staticClass:"description"},[e._v("钱包余额")]),r("span",[e._v(" "+e._s(e._f("fromToken")(e.currentForm.balance.tokenBalance,e.currentForm.underlyingDecimals,2))+" "+e._s(e.currentForm.name)+" ")])])])],1)])])],1)],1)],1)},W=[],N={name:"DashboardBorrowDialog",props:{dialogVisible:Boolean,currentForm:Object},data:function(){return{USET_DECIMAL_PLACES:_["b"],screenWidth:document.body.clientWidth,defaultWidth:400,currentDialogVisible:!1,repayAmount:0,borrowAmount:0,status:{enabled:!1,ctokenBalance:0,borrowBalance:0,marketRate:0},cToken:null,hopeBorrowed:111,hopeTotalLimit:1111,hopeLimitPercent:11111}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["address","contracts","fullscreenLoading","borrowed","borrowedLimitPercent"])),{},{borrowAmountPercent:function(){var e=0;return e=this.borrowAmount>0?1*this.$toPercent(this.hopeLimitPercent,100):this.$toPercent(this.borrowedLimitPercent,100),e<0&&(e=0),e>100&&(e=100),e},repayAmountPercent:function(){var e=0;return e=this.repayAmount>0?1*this.$toPercent(this.hopeLimitPercent,100):this.$toPercent(this.borrowedLimitPercent,100),e<0&&(e=0),e>100&&(e=100),e}}),created:function(){},mounted:function(){},methods:Object(o["a"])(Object(o["a"])({},Object(c["c"])(["setShowFullscreenLoading"])),{},{enable:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.cToken.enableMarket();case 2:return n=t.sent,t.next=5,n.wait(1);case 5:t.sent,e.flushStatus();case 8:case"end":return t.stop()}}),t)})))()},borrow:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("borrow"),""!==e.borrowAmount&&0!=e.borrowAmount){t.next=4;break}return e.$notify.error({title:"error",message:"请输入数量"}),t.abrupt("return",!1);case 4:return e.setShowFullscreenLoading(!0),n=e.$toToken(e.borrowAmount,e.currentForm.cTokenDecimals),t.next=8,e.cToken.borrow(n);case 8:return r=t.sent,t.next=11,r.wait(1);case 11:t.sent,e.resetStatus();case 14:case"end":return t.stop()}}),t)})))()},repayBorrow:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("repayBorrow"),""!==e.repayAmount&&0!=e.repayAmount){t.next=4;break}return e.$notify.error({title:"error",message:"请输入数量"}),t.abrupt("return",!1);case 4:if(n=e.$fromToken(e.currentForm.balance.tokenBalance,e.currentForm.underlyingDecimals,2),!(e.repayAmount>n)){t.next=8;break}return e.$notify.error({title:"error",message:"余额不足"}),t.abrupt("return",!1);case 8:return e.setShowFullscreenLoading(!0),r=e.$toToken(e.repayAmount,e.currentForm.cTokenDecimals),t.next=12,e.cToken.repayBorrow(r);case 12:return a=t.sent,t.next=15,a.wait(1);case 15:t.sent,e.resetStatus();case 18:case"end":return t.stop()}}),t)})))()},repayMaxfn:function(){console.log("this.repayMaxfn");var e=this.$fromToken(this.currentForm.balance.tokenBalance,this.currentForm.underlyingDecimals,2);this.repayAmount=e},max80fn:function(){console.log("max-max80fn")},closeDialog:function(){console.log("closeDialog"),this.borrowAmount=0,this.repayAmount=0,this.$emit("closeDialogVisible")},resetStatus:function(){this.setShowFullscreenLoading(!1),this.closeDialog()},flushStatus:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.cToken.getAccountSnapshot();case 2:return n=t.sent,t.next=5,e.cToken.getMarketEnabled();case 5:t.t0=t.sent,t.t1=n[0],t.t2=n[1],t.t3=n[2],e.status={enabled:t.t0,ctokenBalance:t.t1,borrowBalance:t.t2,marketRate:t.t3};case 10:case"end":return t.stop()}}),t)})))()},onChangeInp:function(){var e=this.borrowAmount;e=e.replace(/[^\d.]/g,""),e=e.replace(/^0(\d+)/g,"$1"),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d{6}).*$/,"$1$2.$3"),this.borrowAmount=e,console.log("this.borrowAmount",this.borrowAmount);var t=this.$toToken(this.borrowAmount,this.currentForm.cTokenDecimals);this.getBorrowLimit(this.currentForm.cToken,t,"borrow")},onChangeInpR:function(){var e=this.repayAmount;e=e.replace(/[^\d.]/g,""),e=e.replace(/^0(\d+)/g,"$1"),e=e.replace(/^\./g,""),e=e.replace(/\.{2,}/g,"."),e=e.replace(".","$#$").replace(/\./g,"").replace("$#$","."),e=e.replace(/^(\-)*(\d+)\.(\d{6}).*$/,"$1$2.$3"),this.repayAmount=e,console.log("this.repayAmount",this.repayAmount);var t=this.$toToken(this.repayAmount,this.currentForm.cTokenDecimals);this.getBorrowLimit(this.currentForm.cToken,t,"repay")},getBorrowLimit:function(e,t,n){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s,o,i,l,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,window.clens.marketInfo(r.address);case 2:return s=a.sent,a.next=5,s.borrowLimit(e,t,n);case 5:o=a.sent,i=o[0],l=o[1],c=o[2],r.hopeBorrowed=i,r.hopeTotalLimit=l,r.hopeLimitPercent=c;case 12:case"end":return a.stop()}}),a)})))()}}),watch:{dialogVisible:function(e){var t=this;this.currentDialogVisible=e,1==e&&(this.contracts.forEach((function(e){e.cToken.cToken.address===t.currentForm.cToken&&(t.cToken=e.cToken)})),this.flushStatus())}}},H=N,q=(n("cb19"),Object(m["a"])(H,Y,W,!1,null,"978c35ae",null)),z=q.exports,J={name:"DashboardBorrow",components:{Dialog:z},data:function(){return{USET_DECIMAL_PLACES:_["b"],currentForm:{cToken:"",asset:null,apy:null,wallet:null,danwei:null,collateral:null,liquidity:0,supplyAPY:0,supplyRatePerBlock:0,borrowAPY:0,borrowRatePerBlock:0,underlyingDecimals:0,balance:{tokenBalance:0}},dialogVisible:!1,input:"888",showAllList:!0}},created:function(){},mounted:function(){},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])(["markets"])),{},{allList:function(){return this.markets.filter((function(e){return 0==e.balance.borrowBalanceCurrent}))},borrowList:function(){return this.markets.filter((function(e){return e.balance.borrowBalanceCurrent>0}))}}),methods:{handleSeleUserId:function(e){this.currentForm=e,this.dialogVisible=!0},closeDialogVisible:function(){this.dialogVisible=!1}}},Z=J,G=(n("607f"),n("d74b"),Object(m["a"])(Z,U,V,!1,null,"184e4638",null)),K=G.exports,X=n("3835");n("3ca3"),n("ddb0");function Q(e){return ee.apply(this,arguments)}function ee(){return ee=Object(s["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("undefined"===typeof window.ethereum&&"undefined"===typeof window.web3){e.next=13;break}return console.log("MetaMask is installed!"),e.next=4,Promise.all([window.ethereum.request({method:"eth_requestAccounts"}),window.ethereum.request({method:"eth_chainId"})]);case 4:n=e.sent,r=Object(X["a"])(n,2),a=r[0],s=r[1],t.set_address(a[0]),t.set_chainID(s),te(t),e.next=14;break;case 13:console.log("Please install MetaMask!");case 14:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return ne=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:window.ethereum.on("connect",(function(e){console.log("connectInfo",e)})),window.ethereum.on("accountsChanged",(function(e){console.log("accounts changed -ethereum.js",e),t.set_address(e[0])})),window.ethereum.on("chainChanged",(function(e){console.log("chainId changed -ethereum.js",e),t.set_chainID(e)})),window.ethereum.on("message",(function(e){console.log("message",e)})),window.ethereum.on("disconnect",(function(e){console.error(e)}));case 5:case"end":return e.stop()}}),e)}))),ne.apply(this,arguments)}var re={name:"Header",components:{DashboardHeader:b,DashboardHeroine:k,DashboardProgress:x,DashboardSupply:R,DashboardBorrow:K},data:function(){return{USET_DECIMAL_PLACES:_["b"],timer:null}},computed:Object(o["a"])({},Object(c["b"])(["chainID","address","markets","contracts"])),mounted:function(){var e=this;console.log("--- -- apps created -- ---"),setTimeout((function(){Q(e).then((function(){e.init(e.address),e.timer=setInterval((function(){e.init(e.address)}),6e3)}))}),0)},destroyed:function(){console.log("--- destroyed ---"),clearInterval(this.timer)},methods:Object(o["a"])(Object(o["a"])({},Object(c["c"])(["set_chainID","set_address","set_balance","set_supplyBalance","set_netAPY","set_borrowBalance","set_borrowed","set_totalLimit","set_borrowedLimitPercent","set_markets","set_contracts"])),{},{init:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,s,o,i,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("-- dashboard init --"),n.next=3,window.clens.marketInfo(e);case 3:r=n.sent,a=r.supplyBalance.toString(),t.set_supplyBalance(a),s=r.netAPY.toString(),t.set_netAPY(s),o=r.borrowBalance.toString(),t.set_borrowBalance(o),t.getBorrowLimit(e),i=r.markets,t.set_markets(i),l=window.contracts,t.set_contracts(l);case 15:case"end":return n.stop()}}),n)})))()},getBorrowLimit:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.clens.marketInfo(e.address);case 2:return n=t.sent,t.next=5,n.borrowLimit();case 5:r=t.sent,a=r[0],e.set_borrowed(a),s=r[1],e.set_totalLimit(s),o=r[2],e.set_borrowedLimitPercent(o);case 12:case"end":return t.stop()}}),t)})))()}})},ae=re,se=(n("0732"),Object(m["a"])(ae,r,a,!1,null,"025938e9",null));t["default"]=se.exports},7878:function(e,t,n){},"8a3f":function(e,t,n){},9205:function(e,t,n){},"99de":function(e,t,n){"use strict";n("04ec")},"9d90":function(e,t,n){},ab2a:function(e,t,n){},cb19:function(e,t,n){"use strict";n("7878")},d74b:function(e,t,n){"use strict";n("648a")}}]);
//# sourceMappingURL=dashboard.d4aa1b5d.js.map